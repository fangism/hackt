# "NOTES"

Notes pertaining to the parser.  

The parser specification (.yy) files and utility scripts (.awk)
have been tested succesfully with the following parser generators:

	yacc (traditional)
	bison-1.35
	bison-1.875
	bison-2.0

One version of bison known to produce d

The various parser generators emit differently formatted "human-readable"
grammar output with the -v option.  
Some scripts generate C-string tables and code based on this output, 
so the error messages reported may vary slightly.  

===============================================================================
Location tracking:

	Before bison-2.0 supported its own default location tracking
	structure, I already implemented one: struct token_position, 
	which is functionally identical.  
	The lexer uses this...

===============================================================================
Functions:

void yyerror(const char*);

	* Much magic going on here.  

	* Explain the global vs. local variable hackery: yacc vs. bison.

	* We actually bother to deallocate tokens on the parser symbol
	stack before exit(1)-ing.  Just showing off the power of my hacks.  

===============================================================================
Parser-generator-specific notes:

yacc:
	The parser action tables generated by yacc are not at all optimized, 
	i.e. multiple goto's have not been compressed.  
	As a result, the "possible rules" message reported by the 
	yyerror function may differ between yacc and bison, 
	which optimizes the parser state machine.  
	We went through to the trouble of supplying expected error
	messages in the test cases where this makes a difference.  

	The symbol stack is declared and defined as static global
	variables, arrays and tables.  
	One consequence of this is that yacc-generated parsers
	are not reentrant, it can never call itself (even indirectly).  

bison:
	Versions 1.35 and 1.875 ... not many issues.  
	
bison-2.0:
	According to the manual, a new feature for invoking destructors
	(%destructor) is now available.  
	(Supposedly this feature became available in 1.875, but seldom used.)
	This is intended for deallocating memory on the symbol stack, 
	where the memory is being held in a pointer-member of the
	symbol's union type.  
	(Yes, unions of pointers are hideous no matter how you look at them.)
	Since we have a technique for freeing memory in the face of 
	single parse errors, we won't use this feature.  


