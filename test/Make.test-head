# "Make.test-head"
# include this first in every subdirectory's Makefile.am
#	$Id: Make.test-head,v 1.34 2007/08/15 01:08:28 fang Exp $
#	vi: ft=automake

include $(top_srcdir)/Make.stddef

# suffixes used by all test directories' Makefiles
# automake will convert these into .SUFFIXES:
# (these can really be distributed across Makefiles...)
SUFFIXES = .hac .depend .hac-cpp .hacdepend \
	.haco .haco-u .haco-c .haco-a \
	.hacktcmpltest .hacktcmplwarntest .hacktcmplfailtest \
	.compiledump .compiledump-filter .compilewarndiff .compilefaildiff \
	.hacktobjtest .outdump .indump .haco-dump \
	.outdump-filter .indump-filter .compileobjdiff \
	.hacfo .compileflatdump .compileflatdump-filter \
	.compileflatdump-diff .compileflatdump-test \
	.findump .findump-filter .hacfobjdiff .hacfobjdifftest \
	.hacflattest .hacf .hacf-filter .hacf-diff \
	.hacflatfailtest .hacf-fail .hacf-fail-filter .hacf-fail-diff \
	.hacktcreatetest .hacktcreatefailtest \
	.createdump .createdump-filter .creatediff \
	.createfaildump .createfaildiff .haco-c-dump .haco-c-err \
	.haco-c-from-haco .haco-c-from-haco-err .create-from-haco-dump \
	.create-from-haco-dump-filter .create-from-haco-diff \
	.hacktcreatefromhacotest \
	.hacktalloctest .haco-a-dump .haco-a-dump-filter \
	.allocdump .allocfaildump .allocdump-filter \
	.allocdiff .alloc-from-haco-diff \
	.haco-a-from-haco \
	.haco-a-from-haco-dump \
	.haco-a-from-haco-dump-filter \
	.alloc-from-haco-dump \
	.alloc-from-haco-dump-filter \
	.hacktallocfromhacotest \
	.hacktcflattest \
	.hacktcflatlvstest \
	.hacktcflatlvsfailtest \
	.hacktsprstest \
	.sprs .sprs-sort .sprsdiff .sprsdiff-sort \
	.hacktcflatseutest \
	.prs .prsdiff .prs-sort .expect-prs .expect-prs-sort .prsdiff-sort \
	.prsseu .prsseu-sort .prsseudiff .prsseudiff-sort \
	.lvsprs .expect-lvsprs .lvsprsdiff .lvsprs-sort \
	.expect-lvsprs-sort .lvsprsdiff-sort \
	.lvsfail .lvsfaildiff \
	.lvssprs \
	.prsimrc .prisimtest .prsimrc-out .prsimrc-out-filter .prsimrc-diff \
	.prsimfailtest .prsimrcfail-out \
	.prsimrcfail-out-filter .prsimrcfail-diff \
	.hacktprsimexprtest .prsimexpr .prsimexprdiff .prsimexpr-O1 \
	.prs-dot .prs-dot-O1 \
	.prs-dot-ps .prs-neato-ps .prs-circo-ps .prs-twopi-ps .prs-fdp-ps \
	.prs-dot-fig .prs-neato-fig .prs-circo-fig .prs-twopi-fig .prs-fdp-fig \
	.prs-dot-pdf .prs-neato-pdf .prs-circo-pdf .prs-twopi-pdf .prs-fdp-pdf \
	.prsimckpttest .prsimckpt .prsimckpt-dump \
	.prsimckpt-indump .prsimckpt-outdump .prsimckpt-diff \
	.prsimckpt-dupe .prsimckpt-dupe-dump \
	.prsimopttest .prsimckpt-O1 .prsimckpt-O1-err \
	.prsimckpt-01-dump .prsimopt-diff \
	.hacktprsdottest \
	.chpsimrc \
	.chpsimtest .chpsimrc-out .chpsimrc-out-filter .chpsimrc-diff \
	.chpsimalloctest .chpsimallocdump .chpsimallocdiff \
	.chpsim-event-dot .chpsim-event-fig \
	.chpsim-event-ps .chpsim-event-pdf .chpsimdottest \
	.chpsimfailtest .chpsimrcfail-out .chpsimrcfail-diff \
	.chpsimckpt .chpsimckpt-outdump .chpsimckpt-indump \
	.chpsimckpt-dupe .chpsimckpt-dupe-dump \
	.chpsimckpt-diff .chpsimckpttest \
	.hacscm .hacscm-out .hacscmfail-out .hacscm-diff .hacscmfail-diff \
	.hacscmtest .hacscmfailtest \
	.hacchpsimscm .hacchpsimscm-out .hacchpsimscmfail-out \
	.hacchpsimscm-diff .hacchpsimscmfail-diff \
	.hacchpsimscmtest .hacchpsimscmfailtest

if USE_UNROLL_PHASE
SUFFIXES += \
	.hacktunrolltest .unrolldump .unrolldump-filter \
	.haco-u-dump .haco-u-dump-filter .unrolldiff \
	.hacktunrollfailtest .unrollfaildump .unrollfaildiff \
	.haco-a-from-u \
	.alloc-from-u-dump .alloc-from-u-dump-filter \
	.haco-a-from-u-dump .haco-a-from-u-dump-filter
endif

# if suffix substitutions ever result in target names with just the suffix
# then just touch empty files with name.
# NOTE: built test script should not be named here, as then need to be
# chmod-ed to be executable.  
BOGUS_SUFFIX_TARGETS = \
	.hac .depend .hac-cpp .hacdepend \
	.haco .haco-u .haco-c .haco-a \
	.compiledump .compiledump-filter .compilewarndiff .compilefaildiff \
	.stderr .outdump .indump .haco-dump \
	.outdump-filter .indump-filter .compileobjdiff \
	.hacf .hacf-filter .hacf-diff \
	.hacf-fail .hacf-fail-filter .hacf-fail-diff \
	.hacfo .compileflatdump .compileflatdump-filter \
	.compileflatdump-diff \
	.findump .findump-filter .hacfobjdiff \
	.createstderr \
	.createdump .createdump-filter .createfaildump .haco-c-dump \
	.createfaildiff .haco-c-err .haco-c-from-haco .haco-c-from-haco-err \
	.create-from-haco-dump \
	.create-from-haco-dump-filter .create-from-haco-diff \
	.haco-a-dump .haco-a-dump-filter \
	.allocdump .allocfaildump .allocdump-filter \
	.haco-a-from-haco \
	.haco-a-from-haco-dump \
	.haco-a-from-haco-dump-filter \
	.alloc-from-haco-dump \
	.alloc-from-haco-dump-filter \
	.prs .prsdiff .prs-sort .expect-prs .expect-prs-sort .prsdiff-sort \
	.sprs .sprs-sort .sprsdiff .sprsdiff-sort \
	.prsseu .prsseu-sort .prsseudiff .prsseudiff-sort \
	.lvssprs \
	.lvsprs .expect-lvsprs .lvsprsdiff .lvsprs-sort \
	.expect-lvsprs-sort .lvsprsdiff-sort \
	.lvsfail .lvsfaildiff \
	.prs-dot .prs-dot-O1 \
	.prsimrc .prsimrc-out .prsimrc-out-filter .prsimrc-diff \
	.prsimrcfail-out .prsimrcfail-out-filter .prsimrcfail-diff \
	.prsimexpr .prsimexprdiff .prsimexpr-O1 \
	.prsimckpt .prsimckpt-dump \
	.prsimckpt-indump .prsimckpt-outdump .prsimckpt-diff \
	.prsimckpt-dupe .prsimckpt-dupe-dump \
	.prsimckpt-O1 .prsimckpt-O1-err .prsimckpt-01-dump .prsimopt-diff \
	.chpsimrc-out .chpsimrc-out-filter .chpsimrc-diff \
	.chpsimrc .chpsimallocdump .chpsimallocdiff \
	.chpsim-event-dot .chpsim-event-ps \
	.chpsimrcfail-out .chpsimrcfail-diff \
	.chpsimckpt .chpsimckpt-outdump .chpsimckpt-indump \
	.chpsimckpt-dupe .chpsimckpt-dupe-dump .chpsimckpt-diff \
	.hacscm .hacscm-out .hacscmfail-out .hacscm-diff .hacscmfail-diff \
	.hacchpsimscm .hacchpsimscm-out .hacchpsimscmfail-out \
	.hacchpsimscm-diff .hacchpsimscmfail-diff

if USE_UNROLL_PHASE
BOGUS_SUFFIX_TARGETS += \
	.unrolldump .unrolldump-filter .unrollstderr \
	.haco-u-dump .haco-u-dump-filter .unrolldiff \
	.unrollfaildump .unrollfaildiff \
	.haco-a-from-u \
	.haco-a-from-u-dump .haco-a-from-u-dump-filter \
	.alloc-from-u-dump .alloc-from-u-dump-filter
endif

if HAVE_CFLAT
SUFFIXES += .cast .castprs
BOGUS_SUFFIX_TARGETS += .cast .castprs
endif

$(BOGUS_SUFFIX_TARGETS):
	@$(TOUCH) $@

CLEANFILES += $(BOGUS_SUFFIX_TARGETS)

# for compile include paths
HACO_FLAGS =

# the {in,out,unroll,create,alloc}dump suffixes are just 
# for testing convenience.   They follow the procedures in the test scripts.  


# names of test cases (without extension) whose compile error output
# differs when using bison vs. yacc (result of different state-machines)
BISON_OUTPUTS =

# tests expecting empty .prs outputs
EMPTY_CFLAT_PRS_TESTS =

