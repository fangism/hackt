# "test/ChangeLog"

2006-11-19	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-54-channel-01-08:
	  Make.test-*: all diff test scripts now start by rm $@, 
		because empty redirections don't cause overwrites.  
	  Handful of test cases added to parser/channel.


2006-11-18	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-54-channel-01-07:
	  Update some dump/filter rules, now that we are logging
		compiler warnings, and concatenating them to dumps.  
		This revision mostly affected Make.test-create.
		Added new ...-err suffixes to catch warning diagnostics.  
	  POM-header-filter.awk.in: now preserve WARNINGs, 
		but objdump diff still filters them out in rule for .outdump.


2006-11-15	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-54:
	  Make.test-*: appended touch commands to many rules that may
		otherwise result in timestamps not updating, due to 
		empty results in redirections.  
		This reduces unnecessary rebuilds.  
		Added some missing .autodepend: Makefile dependencies.
	  Test update scripts updated.  
	  Added new test cases to parser/{chp,channel}.  


2006-11-14	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-53:
	  Added Make.test-flatten for preprocessor tests.  
	  Make.test-{head,tail} support for flatten tests.  
	  Added hackt-flatten-expect-filter.awk.
	  Added bunch of flatten test cases in lexer/ and parser/basic/.  


2006-11-12	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-52-merged-test-12:
	  Merged test parallelization branch to trunk.  


2006-11-11	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-50-test-12:
	  Re-factored test dependencies in Make.test-prsim to re-use
		the checkpoint from the basic (pass) test for multiple tests.
		Cuts a chunk of simulation time down by factor of 2.  


	* HACKT-00-01-04-main-00-80-50-test-11:
	  distclean: distclean-depend-local (don't recurse)


	* HACKT-00-01-04-main-00-80-50-test-10:
	  Partitioned Make.test-tail.
	  distclean-depend is now recursive.
	  build-check is now recursive from the top-level directory.  


	* HACKT-00-01-04-main-00-80-50-test-09:
	  Make.test-tail:
		new recursive targets: build-check, cleaner.
		Now uses AUTO_DEPENDS variable from project-wide top-level.  
		Now uses AM_CONDITIONAL(VERBOSE_CHECK) to control
		  some of the echoing during build-check.  
		SUBJECTS = PASSES + FAILURES variable aggregation now
		  done in this template, not in includers.  


2006-11-10	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-50-test-08:
	  Parallelized cflat-seu, cflat-sprs, and prs-dot tests.
	  Only clean-up remains.  


	* HACKT-00-01-04-main-00-80-50-test-07:
	  Parallelized cflat-prs, cflat-lvs, and prsim-opt tests.  
		LVS tests are now divided into pass/fails.  
	  Unexpanded $(srcdir) references in auto-dependencies.  
	  One more batch of parallelization, then clean-up.  


	* HACKT-00-01-04-main-00-80-50-test-06:
	  Parallelized prsimexpr tests and prsim-checkpoint tests.  
	  Added new template test scripts:
		prsimckpt-template.prsimrc, prsimckpt-load-template.prsimrc
	  TODO: cleanup: test dependencies that reference a file
		added by the auto-dependency generator need not 
		be tested, e.g. .stderr files.  
		They are an unnecessary safety measure.  
	  TODO: maybe replace srcdir paths in autodepend's with
		just '$(srcdir)' which is defined by the includer.  
	  TODO: Make.test-tail getting to be unwieldly, split up
		rules by group before branch is over.  


2006-11-09	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-50-test-05:
	  Parallelized prsim-tests (basic only).  


	* HACKT-00-01-04-main-00-80-50-test-04:
	  Parallelized alloc-tests.


2006-11-08	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-50-test-02:
	  Parallelized unroll-tests.  


	* HACKT-00-01-04-main-00-80-50-test-01:
	  Parallelized compile-tests.  


2006-10-24	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-45:
	  Make.test-tail: Now every test directory evaluates dependencies
		for all test cases, so 'made' objects are correctly
		re-built when dependent sources are updated.  
		This reduced the number of false-positive errors reported
		between updates.  
	  TODO: restructure tests to use make for concurrency, 
		and efficient and incremental re-test evaluation.  


2006-10-23	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-42:
	  Now uses srcdir_EXTRA_DIST variable to distribute test cases, 
		to prevent accidentl building and dependence on generated
		versions in the build-dir.  This now allows the test sub-tree
		to be distributable *even under a VPATH build*.  
	  Now recommend using EXTRA_DIST only for built targets that 
		should be distributed.  


2006-10-19	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-41:
	  Make.test-tail: all hac object files in test suite now
		depend on the executable, to force rebuilds after re-make.


2006-10-17	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-29:
	  test/lib: removing unroll/create/alloc tests because they
		cause too much trouble.  Will re-instate later when 
		test framework is revamped.  Not removing stderr
		outputs from CVS until their fate is decided later.  


2006-09-17	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-21:
	  Made lib tests more rigorous by repeatedly running repeated
		short test of stability initially coming out of reset.
		This detected some errors not previously detected.  


2006-09-11	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-03-instance-00-18-template-02:
	  Temporarily disabled all tests except compile-tests.  
	  Will re-enable once compile-time regressions have been addressed
		and unroll-time features are ready for testing again.  


2006-08-24	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-80-03:
	  Added quarantine directory for bug test cases.
	  Added .*test dummy targets to Make.test-tail.
	  Cleaning bogus suffix-only targets.  


2006-08-20	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-79-61:
	  Added make-variable HACKT_PARSE_TEST_WARNINGS for tests
		that pass, but expect a .stderr file containing warnings.
		The .stderr automatically added to EXTRA_DIST by Make.test-tail.
		Recommended practice: added this variable to both
		HACKT_PARSE_TEST_SUBJECTS and HACKT_OBJ_TEST_SUBJECTS
		in local Makefile.am's.


2006-08-13	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-79-58:
	  Added missing target for hackt-cflat-lvs-sh.in.
	  Rewrote script targets for distribution.  


2006-08-13	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-79-57:
	  Modified cflat-lvs test support to take optional -t type argument
		when the source .hac file contains a comment with 
		the magic string @hflat-type@ <type>.  The 'type' is extracted
		and passed to hackt cflat.  


2006-08-09	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-79-54:
	  Added support for cflat-lvs tests.  


2006-07-28	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-79-40:
	  Makefiles added support for graphviz figure generation.  
	  Suffixes updated to be less confusing.  
	  PostScript generation uses optimized dot source by default.  


2006-07-27	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-79-39:
	  test-series.sh.in: also run .hacktprsdottest where appropriate.


	* HACKT-00-01-04-main-00-79-38:
	  Added support for testing prsimexpr and dot generation of
		all valid (alloc/prsimrc) test cases.  


	* HACKT-00-01-04-main-00-79-37:
	  Provisions for automatic dependence-tracking in .depend files
		generated from .hac.haco suffix rules in Makefile.  
	  TODO: consider a way of generating an -included depfile.  


2006-07-16	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-79-29:
	  Updated test-series.sh.in to allow for compile tests with warnings.  
	  test.cvsignore and Make.test-tail account for *.nowarn.  


2006-07-15	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-79-29:
	  POM-header-filter.awk: ignore WARNING: lines from compiler.  
	  hackt-obj-diff.sh.in: test for .haco instead of .test output.  


2006-07-01	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-79-20-cow-03:
	  Made rm <pattern> more robust when cleaning files, 
		calls new $(top_srcdir)/script/rm_pattern.sh.


2006-06-30	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-79-20-cow-02:
	  Make.test-tail: clean target uses more patterns instead of 
		auto-deduced CLEANFILES lists to avoid comand-line limit.
		Extra clean patterns added to rm -rf to avoid 
		directory listing spillage.  


2006-05-31	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-79-09:
	  parse-test-expect.sh.in: include flags are passed in by Makefile.am
		using the HACO_FLAGS variable.  
	  Makefile.am: introduced appendable HACO_FLAGS variable
		for compiling against files in other directories.  


2006-05-04	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-78-22-prsim-04-10:
	  Added test support for verifying that prsim -O1 results in 
		identical checkpoints as the default -O0.  


2006-05-02	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-78-22-prsim-04-05:
	  Added test support for verifying prsim checkpoint consistency.


2006-04-30	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-78-22-prsim-04-02:
	  prsimrc-random-time-filter.awk: account for cause diagnostics
	  update-*.sh: maintainer scripts updated with getopt-ability
		to take -s srcdir as argument, useful in VPATH builds.  


2006-04-12	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-78-13-merged-spec-02-04:
	  Branch merge.  


2006-04-11	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-78-11-spec-02-03:
	  Added support for testing SEU mode of cflatting to test
		new special spec directives.  


2006-04-08	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-78-11:
	  hackt-expect-prs.sh.in: Exclude "weak" pattern from prsim tests 
		because new attribute not supported by the legacy tool-chain.


2006-04-03	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-78-08:
	  Added additional filter to filter out random timestamps
		in test cases that use random timing.  


	* HACKT-00-01-04-main-00-78-07-merged-prsim-01-15:
	  Branch merge, introducing prsim test suite.  


2006-03-30	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-78-05-prsim-01-11:
	  Added prsimrc-filter.awk for post-processing prsimrc output logs.
	  Updated the way prsimrc tests are run, using the new filter, 
		and passing -I$(srcdir) to enable checking of recursive
		source scripts.  Should pass VPATH build checks.  :)


2006-03-26	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-78-05-prsim-01-06:
	  Added preliminary support for prsim run-commands tests.


2006-03-21	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-78-05:
	  Enabled object consistency checks for create and alloc targets.
	  Basically, they diff against the objects produced by various
		partial compiles of intermediate objects and verify that
		the contents produce identical object dumps.  


2006-02-05	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-77-4-preal-01-09:
	  Added support for sprs (sized PRS) generation and testing.  


2006-02-05	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-77-4:
	  Attempted to try consistency checking between create phase, 
		using .haco (instead of .haco-u) as input, but resulted
		in many differences, due to instability of reconstructing
		alias rings (equivalent, but unordered).  
	  TODO: decide when to overhaul connection structures, 
		replace with union-find.  


2006-01-30	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-76-2-fixdump-06:
	  Removed archaic clean-test and subdir.not_a_test bogus targets
		and no longer using test_report.txt.  Good riddance. 
	  TODO: eliminate redundant make suffix rules to produces
		various dumps -- just use one suffix rule.
	  TODO: add test rule for generating intermediate objects in
		different manners, skipping and fusing compile phases.  
		This is badly needed to detect and correct a critical
		inconsistency bug!


2006-01-23	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-74-PRS-04-01:
	  Added even more suffix rules for testing convenience.  
		Just run 'make'!
	  Added more echo- targets to make test updating (en masse) easy.


2006-01-10	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-72-prsim-00-13:
	  Added suffix rules for standard HACKT object files
		and various other test output files.
	  Now can build dot/ps visualizations of prsim expressions
		with Makefile rules!


2006-01-09	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-72-prsim-00-11:
	  Added test support for prsim expression allocation dumps.  
	  TODO: decide what to do about an expression optimization pass...
		Add a command-line flag to enable/disable it.  


2005-12-12	David Fang		<fangism@users.sourceforge.net>

	* HACKT-00-01-04-main-00-72-merged-rename-00-06:
	  Trunk merge.  Massive renaming.  


2005-12-12	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-71-rename-00-05:
	  MAJOR TEST RESTRUCTURING: script names, object file extensions, 
		and Makefile macro variables have been expunged of
		"art" and "ART", and replaced with more appropriate names.  
	  The Object file naming convention we adopt now is:
		.haco -- just compiled
		.haco-u -- unrolled
		.haco-c -- created
		.haco-a -- allcoated


2005-12-11	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-71-rename-00-04:
	  MAJOR FILE MOVE: All test .in files have been renamed to .hac.
	  All affected test scripts and test outputs have been updated
		to reflect this change.  


2005-12-10	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-71-rename-00-03:
	  In this branch, we will be moving and renaming all test input
		files from .in to .hac, and removing all traces of 
		"ART" or "art".
	  Forgot to rm *.sort in cleaner target.  
	  Fixed EMPTY_CFLAT_PRS generation in Make.test-tail, 
		which wasn't working properly for VPATH builds before.
		(THough failure was not fatal, and nearly silent.)


2005-11-09	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-65-parser-03-10:
	  Updated compile test error filter script to handle
		both state enumerations and vpath differences.  
		The new hackt-parse-expect-filter.awk depends on the
		old (library) state_enum_filter.awk and the new
		vpath_file_filter.awk.
	  Added -I $(srcdir) to all parse and compile tests which work
		in vpath builds now.  


2005-11-01	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-62-cflat-02-04:
	  Enhanced hackt-cflat-test.sh.in to check and see if 
		.prs differences are only a result of reordering.  


2005-10-27	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-61-flow-01-04:
	  Finally figured out how to redirect stderr+stdout without going 
		through cat.  Just append file descriptor combiner at the end.
		e.g. foo > log 2>&1.
		Now test scripts don't have to execute same program twice
		to get exit status and log files separately.  
		I love Bourne shell (/bin/sh).  
	  Updated *.sh.in test scripts accordingly.  


2005-10-25	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-60-merged-PRS-02-11:
	  Merge to trunk.  Includes some minor test template revisions.  


2005-09-14	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-59-merged-unique-02-15:
	  Branch merge.  


2005-09-12	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-58-unique-02-07:
	  Added test support for unique state allocation (alloc) phase.  
	  Expected output format is only tentative, until a complete
		implementation of objdump for state comes along (soon).  


2005-09-04	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-56-merged-footprint-01-36:
	  Merged revisions and enhancements from -footprint branch.
	  Most notably the diff analysis scripts.  


2005-08-25	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-55-footprint-01-24:
	  Unroll and create test scripts now check for input file existence
		and non-zero size before executing.  


2005-08-15	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-55-footprint-01-06-merged-canonical-07:
	  Merged test suite revisions from branch.  
		Include test-analysis extensions.  
	  Many tests themselves were updated because of new object binary.


2005-08-14	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-55-footprint-01-05-canonical-03:
	  This revision arrives after having spent considerable effort 
		reworking the canonical type management in HACKT.
		The information in the objects remains the same while 
		the object binaries changed somewhat.  The new scripts
		introduced aid in the analysis of these "insignficant"
		differences.  
	  New: POM-index-filter.awk: takes the output of POM-header-filter.awk
		and filters out the indices of the object manager header. 
		Useful for minimizing the differences between object binaries.  
	  Extended unroll and create test script templates to
		conditionally perform further analysis on object dump
		differences, depending on whether or not non-header
		differences (in the human readable section) were introduced.  
	  analyze-dump-diff.awk: assess the nature of the object
		dump's differences.  Takes a diff -u output as input.  
	  Make.test-tail: updated to reflect script and test additions.  
		Notable: added check-summaries target.


2005-08-06	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-53-unique-01-06:
	  Added automake macros and rules for hackt create tests.  
		using .hacktcreatetest as generated test script, 
		.hacktobjcreate as created object file, 
		.create{dump,stderr,diff} as test outputs.  
	  Added hackt-create-expect.sh.in configured test script.  
	  Moved standard TESTS definition (+=) to Make.test-tail.
	  TODO: eventually abandon the ART/art names and adopt HACKT/hackt.  


2005-08-04	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-53-merged-configtest-03:
	  Merged revisions from -configtest (-03) branch.


2005-08-04	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-52-configtest-02:
	  Made test shell scripts configure-generated, using the 
		results of configure.  


2005-07-24	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-51:
	  Updated Make.test-tail to use new double-command form
		of executable "hackt <command>".


2005-07-22	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-49-maintainence-01:
	  Reworked Makefile.am structure, replacing Make.test
		with Make.test-head (include first) and Make.test-tail
		(include last).


2005-07-08	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-48-connect-01-23:
	  Made `cleaner' recursive in Make.test, inherited by other
		Makefiles in subdirectories.  
	  Changed artobjunroll test script!
		We now store the *filtered* unrolldump in the the
		repository's .stderr outputs, since there's no sense in
		keeping the unfiltered version around for comparison.  
		This will also dramatically reduce the size of the
		patches everytime the binaries change size as a result
		of individual objects changing size.  


2005-07-07	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-48-connect-01-19:
	  Enhanced Make.test to include a check.log target, which
		saves the results of "make -k check" to log file, 
		and dumps a quick failure summary.  This is usable
		in the top test directory, and any of its subdirectories, 
		thanks to automake.  Should've done this ages ago.  


2005-06-18	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-42-CHP-01-22:
	  "state_enum_filter.awk" handle case of bison grammar output
		where a the LHS of a rule is abbreviated with just '|'
		as a continuation of the previous line.  
		(bison vs. yacc difference)


2005-05-20	David Fang		<fangism@users.sourceforge.net>

	* ARTXX-00-01-04-main-00-38:
	  Added this ChangeLog.
	  Added POM-header-filter.awk to reduces test expectation conflicts
		due to trivial (insignificant) differences 
		and path-related differences.
	  artobj-diff.sh: added -d flag to art++2obj invocation
		to cause textual dump.  
	  	set up $filter command as pure pipe.
	  artobjunroll-expect.sh: set up $filter command as pure pipe.


