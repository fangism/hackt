% "chapters/definition.tex"
%	$Id: definition.tex,v 1.3 2005/05/05 23:23:18 fang Exp $

\chapter{Definitions and Types}
\label{sec:definition}

NOTE: This chapter is very incomplete.  

All definitions types contain two (possibly empty) lists of template
formals: a strict parameter list and a relaxed parameter list.  
The template parameter list format is summarized
in Section~\ref{sec:definition:template}.  

All definitions start with the following data:
\begin{enumerate}
\item string: name
\item pointer: back-reference to parent namespace
\item Template parameters (Section~\ref{sec:definition:template})
\end{enumerate}

The sub-types of definitions extend the fields:

\subsubsection{Data type definitions}
\begin{enumerate}
\item ...
\end{enumerate}

\subsubsection{Channel type definitions}
\begin{enumerate}
\item ...
\end{enumerate}

\subsubsection{Process type definitions}
\begin{enumerate}
\item Sequence of public ports
\item Symbol table: same as described in Section~\ref{sec:namespace:table}
\item Sequential instance management for unrolling (internal connections)
\end{enumerate}

Definitions contain member layout maps, 
one \emph{per unique tuple} of template arguments.  
Before type-checking is complete, the list of layout maps will be empty.  
After unrolling (before expansion), 
each definition will be populated with layout maps for each 
unique tuple of parameters that it is invoked with.  
(Does NOT exhaustively check all possible values --- impossible.)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Template Parameters}
\label{sec:definition:template}

Template parameters contain two lists of pointers of parameters, 
that may include formal values, or formal type parameters.  
(All pointers here are also registered with the symbol table.)  

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Process Ports}
\label{sec:definition:ports}

List of pointers to physical instances (collections) that are publicly
accessible to the outside.  
(All pointers here are also registered with the symbol table.)  

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Typedefs}
\label{sec:definition:typedef}

Typedefs are aliases to defined types.  
Typedefs may also contain template parameters.  
Typedefs' symbol tables should contain only template formal parameters
	and public port parameters, i.e. no additional local symbols.  

\begin{enumerate}
\item Template parameters
\item pointer: to base type reference (Section~\ref{sec:definition:typeref})
\end{enumerate}

Incidentally, typedefs are sub-typed for processes, channels, data-types.  

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Type References}
\label{sec:definition:typeref}

Type references contain:

\begin{enumerate}
\item string: name
\item pointer: to parent namespace
\item pointer: to a base definition
\item sequence of template arguments that complete the type
\end{enumerate}

Incidentally, type references are sub-typed for 
processes, channels, data-types.  

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Member Layout Maps}
\label{sec:definition:layout}

NOTE: Not yet implemented, in progress.  

Each time a definition is used with fully specified parameters, 


