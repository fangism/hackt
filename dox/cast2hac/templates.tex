% "cast2hac/templates.tex"
%	$Id: templates.tex,v 1.4 2006/08/15 20:05:10 fang Exp $

\section{Templates}
\label{sec:templates}

\CAST\ supported parameterized definitions and types, also known as templates.
\hac\ supports templates using C++-like template syntax.  
Templates are useful for defining a family types with 
highly regular differences.  
Such generalizations often occur in definitions whose 
port sizes or implementations vary enumerably or trivially.  
The most notable differences from \CAST\ templates and \hac\ templates
is the use of angle brackets around template arguments 
and parameter declarations, and the grammatic location of the 
template signature\footnote{This originates from C++ template syntax.}.  

In \CAST, a parameterized definition might look like this:

\begin{verbatim}
define foo()(int N) (node[N] x) { }
\end{verbatim}

The equivalent definition in \hac\ would be:

\begin{verbatim}
template <pint N>
defproc foo (bool x[N]) { }
\end{verbatim}

\CAST\ and \hac alike support parameter-dependent template parameters.

\begin{verbatim}
define array()(int N, D[N]) () { }
\end{verbatim}

\noindent
would be written in \hac\ as:

\begin{verbatim}
template <pint N, D[N]>
defproc array() { }
\end{verbatim}

Definitions are not the only templatable entities.  
Section~\ref{sec:typedefs:templates} discusses how typedefs 
can be templated in \hac.  

\subsection{Instantiations}
\label{sec:templates:inst}

In \CAST, templates were instantiated by passing parameter values
in parentheses, e.g. \ttt{e1of(2)}.
In \hac, template parameters are passed in angle brackets, e.g.
\ttt{e1of<2>}.  

\subsection{Default Parameters}
\label{sec:templates:default}

\subsection{Relaxed Templates}
\label{sec:templates:relaxed}

Status: this feature is currently incomplete and should be avoided
until further notice.  
See the corresponding chapter of the \hac\ Language Specification
document for more details.  

Relaxed templates allow certain parameters of a type template
to \emph{vary} within an aggregate collection.  


